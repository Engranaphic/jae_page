import{s as C,c as E,u as w,o as S,r as z}from"./@firebase.065648e6.js";import{d as h,s as v}from"./index.2025ce1d.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{a as d,o as D,b as L,e as c,j as i,k as e,F as y,C as x,l as P,x as A,z as F,A as N}from"./@vue.9e671e56.js";import"./tslib.9ddfe73c.js";import"./idb.94e4f64e.js";import"./vue-router.fd8ca502.js";import"./firebase.127c8ce3.js";/* empty css                  */import"./@fortawesome.32fda8e3.js";const l=r=>(F("data-v-f40aad47"),r=r(),N(),r),R={id:"clients"},V=l(()=>e("div",{class:"main-title"},"Enmarcaciones",-1)),$={class:"container grid"},q={class:"col-12 lg:col-4"},M={class:"login-form"},T=l(()=>e("div",{class:"title flex"}," Subir una Imagen ",-1)),U=l(()=>e("div",{class:"form-text"}," Las imagenes subidas apareceran en la seccion de Enmarcaciones ",-1)),G={class:"field"},H=l(()=>e("label",{for:"name"},"Imagen (se recomienda subir solo logos)",-1)),J={class:"col-12 lg:col-8"},K={class:"w-full"},O=l(()=>e("thead",null,[e("tr",{class:"grid"},[e("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Imagenes"),e("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Acciones")])],-1)),Q={class:"col text-center flex justify-content-center align-items-center"},W=["src","alt"],X={class:"col text-center flex justify-content-center align-items-center"},Y={class:"flex flex-wrap justify-content-center"},Z=["onClick"],ee={__name:"Enmarcaciones",emits:["toasting"],setup(r,{emit:_}){const u=C(h,"enmarcacion"),o=d(),f=d([]),g=d(0),p=d(1),b=n=>{o.value=n.target.files[0]};D(()=>{E(u,n=>{let a=[],t=[];n.forEach(s=>{let m={id:s.id,name:s.data().name,url:s.data().url,created:s.data().created};a.length>=5&&(t.push(a),a=[]),a.push(m)}),a.length!=0&&(t.push(a),a=[]),p.value=t.length,f.value=t})});const k=()=>{let n=v.child("enmarcaciones/"+o.value.name),a={contentType:"img/jpeg"};n.put(o.value,a).then(t=>{t.task.snapshot.ref.getDownloadURL().then(s=>{w(u,{name:"enmarcacion/"+o.value.name,url:s,created:new Date}),o.value=""}).catch(s=>{})}).catch(t=>{_("toasting","Error "+t.code+" al crear cliente: "+t.message,"error")})},I=n=>{v.child(n.name).delete().then(t=>{S(z(h,"enmarcacion",n.id))}).catch(t=>{_("toasting","Error "+t.code+" al eliminar cliente: "+t.message,"error")})},j=n=>{g.value=n-1};return(n,a)=>{const t=L("font-awesome-icon");return c(),i("div",R,[V,e("div",$,[e("div",q,[e("div",M,[T,U,e("div",G,[H,e("input",{onChange:b,type:"file",required:"true",accept:"image/*"},null,32)]),e("div",{class:"flex justify-content-end"},[e("div",{class:"boton-mail select-none cursor-pointer",onClick:k},"Subir")])])]),e("div",J,[e("table",K,[O,e("tbody",null,[(c(!0),i(y,null,x(f.value[g.value],s=>(c(),i("tr",{key:s.id,class:"grid py-3"},[e("td",Q,[e("img",{src:s.url,alt:s.name,class:"galery-image"},null,8,W)]),e("td",X,[e("div",{class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center",onClick:a[0]||(a[0]=m=>I(n.serv))},[P(t,{icon:"fa-solid fa-trash-can"})])])]))),128))]),e("tfoot",null,[e("div",Y,[(c(!0),i(y,null,x(p.value,s=>(c(),i("div",{class:"indices-tabla select-none cursor-pointer",onClick:m=>j(s),key:s},A(s),9,Z))),128))])])])])])])}}},me=B(ee,[["__scopeId","data-v-f40aad47"]]);export{me as default};
